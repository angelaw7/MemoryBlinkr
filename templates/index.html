<html>

<body>
    <div>
        <button id="start_btn"> Start </button>
    </div>
    <div id="grid_container" class="hide">

    </div>
</body>

<script>
    let grid_container = document.getElementById('grid_container')
    const start_btn = document.getElementById('start_btn')
    start_btn.addEventListener("click", (event) => {
        start_btn.classList.add("hide")
        grid_container.classList.remove("hide")
    })

    // temp constants
    const expected_grid = [[0, 1, 0, 1], [1, 0, 0, 0], [0, 0, 1, 1], [1, 1, 1, 0]]
    const blank_grid = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]


    const colors = ['white', 'black']
    const length = expected_grid.length
    const grid_width = 500;

    function genID(i, j) {
        return (i.toString()) + '-' + (j.toString())
    }

    function generateGrid(grid) {
        const grid_el = document.createElement('div')
        grid_el.setAttribute("id", "grid")
        const length = grid.length
        for (let i = 0; i < length; i++) {
            const row = document.createElement('div')
            row.classList.add('row')
            const max_width = 20;
            for (let j = 0; j < length; j++) {
                const cell = document.createElement('div')
                value_id = grid[i][j]
                cell.style.backgroundColor = colors[value_id]
                cell.classList.add('cell')
                const cell_id = genID(i, j)
                cell.setAttribute("id", cell_id)
                cell.style.width = (grid_width / length).toString() + 'px'
                cell.style.height = (grid_width / length).toString() + 'px'
                row.appendChild(cell)
            }
            grid_el.appendChild(row)
        }
        return grid_el
    }
    const g = generateGrid(expected_grid)
    grid_container.appendChild(g)

    let new_grid = []
    for (let i = 0; i < length; i++) {
        row = []
        for (let j = 0; j < length; j++) {
            row.push(0)
        }
        new_grid.push(row)
    }

    function blink() {
        grid_container.innerHTML = ''
        const blank_grid = generateGrid(blank_grid)
        grid_container.appendChild(blank_grid)
    }

    const grid_el = document.getElementById('grid')
    grid_el.addEventListener("click", (event) => {
        target = event.target
        target_id = target.id
        let [i, j] = target_id.split('-')
        i = parseInt(i), j = parseInt(j)
        blank_grid[i][j] == 1 ? blank_grid[i][j] = 0 : blank_grid[i][j] = 1
        target.style.backgroundColor = colors[blank_grid[i][j]]

    })

</script>

<style>
    #grid {
        display: inline-grid;
        border: 1px solid #eee;

    }

    .row {
        width: 100%;
        display: flex;
        flex-direction: row;
        margin: 0;
        padding: 0;

    }

    .cell {
        margin: 0;
        padding: 0;
        border: 1px solid #eee;
        cursor: crosshair
    }

    .hide {
        display: none;
    }
</style>

</html>